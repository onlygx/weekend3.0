<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="RoleMapper" >

  <cache type="org.mybatis.caches.ehcache.LoggingEhcache"/>

  <select id="selectById" resultType="role" parameterType="role" >
    select 
    id, `name`, intro, set_time, account_id
    from t_role
    where id = #{id,jdbcType=BIGINT}
  </select>
  <delete id="deleteById" parameterType="role" >
    delete from t_role
    where id = #{id,jdbcType=BIGINT}
  </delete>

  <delete id="deleteByIds" parameterType="list">

    delete from t_role where id in

      <foreach item="ids" collection="list" open="(" separator="," close=")">
          #{ids}
      </foreach>

  </delete>

  <insert id="insert" parameterType="role" >
    insert into t_role (id, `name`, intro,
      set_time, account_id)
    values (#{id,jdbcType=BIGINT}, #{name,jdbcType=VARCHAR}, #{intro,jdbcType=VARCHAR}, 
      #{setTime,jdbcType=TIMESTAMP}, #{accountId,jdbcType=BIGINT})
  </insert>

  <update id="updateById" parameterType="role" >
    update t_role
    <set >
      <if test="name != null" >
        `name` = #{name,jdbcType=VARCHAR},
      </if>
      <if test="intro != null" >
        intro = #{intro,jdbcType=VARCHAR},
      </if>
      <if test="setTime != null" >
        set_time = #{setTime,jdbcType=TIMESTAMP},
      </if>
      <if test="accountId != null" >
        account_id = #{accountId,jdbcType=BIGINT},
      </if>
    </set>
    where id = #{id,jdbcType=BIGINT}
  </update>

  <select id="list" resultType="role" parameterType="map">
    select * from t_role where 1=1
    <if test="name != null" >
     and `name` like CONCAT('%',#{name},'%')
    </if>
  </select>
</mapper>